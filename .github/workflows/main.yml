name: Deploy to Hostinger

on:
  push:
    branches: [ main ]  # Trigger the workflow on pushes to the main branch

jobs:
  deploy:
    runs-on: ubuntu-latest  # Replace with a preferred runner if needed

    steps:
      - uses: actions/checkout@v4 # Checkout your code from GitHub

      - name: Install dependencies (adjust if you use yarn)
        run: npm install --loglevel=error # Install required dependencies for building

      - name: Build the React app
        run: npm run build  # Build the app for production (replace with yarn build if needed)

      - name: Create a deployment archive
        uses: actions/upload-artifact@v3  # Create an artifact for deployment files
        with:
          name: build-artifact
          path: build  # Replace with your build directory path if different

      - name: Deploy to Hostinger
        uses: appleboy/scp-action@v0.1.7 # Use the scp-action to deploy
        with:
          host: ftp.abkarcode.com  # Replace with your Hostinger server hostname
          username: ${{ secrets.FTP_USER }}  # Replace with your Hostinger username
          password: ${{ secrets.FTP_PASSWORD }}  # Or use an SSH key (recommended)
          port: 21  # Standard SSH port
          source: "build-artifact/**/*.*"  # Upload all files from the build artifact
          target: "/home/u854838731/domains/abkarcode.com/public_html"  # Replace with your deployment directory on Hostinger



